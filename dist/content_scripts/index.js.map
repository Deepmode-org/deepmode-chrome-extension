{"version":3,"sources":["content_scripts/showBlock.js","content_scripts/messaging.js","content_scripts/bodyReady.js","../node_modules/lodash.assignin/index.js","../node_modules/webext-redux/lib/constants/index.js","../node_modules/webext-redux/lib/serialization.js","../node_modules/webext-redux/lib/strategies/constants.js","../node_modules/webext-redux/lib/strategies/shallowDiff/patch.js","../node_modules/webext-redux/lib/util.js","../node_modules/webext-redux/lib/store/Store.js","../node_modules/webext-redux/lib/store/applyMiddleware.js","../node_modules/webext-redux/lib/strategies/shallowDiff/diff.js","../node_modules/webext-redux/lib/wrap-store/wrapStore.js","../node_modules/webext-redux/lib/alias/alias.js","../node_modules/webext-redux/lib/index.js","content_scripts/index.js","../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["showBlock","window","document","taskDescription","blockInner","title","deepmodeRootElem","getElementById","innerHTML","style","display","addEventListener","closeCurrentTab","sendMessage","type","params","chrome","runtime","Object","assign","onTopicMismatch","store","onMessage","addListener","msg","sender","sendResponse","getState","match","bodyReady","Promise","resolve","reject","moBody","MutationObserver","checkForBody","observe","documentElement","childList","subtree","setTimeout","disconnect","mutations","i","length","nodes","addedNodes","j","node","nodeType","tagName","Store","portName","all","ready","then","arr","body","deepmodeRoot","createElement","id","appendChild","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module"],"mappings":"AgBAA,ACAA,AdAA,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,AKAA,IIAI8D,ACAAW,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;AdCA,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA;AIAA,ACCA,AdAA,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AGFA,SCCSX,ACCAY,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,AdAF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,MIDM,ACCAC,CDDCf,MCCM,GDDX,ACCcc,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEhB,AbCJ,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AGFA,ICCIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADa,AdCF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,EKDEA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AdCJ,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AGHA,IEEIA,IAAI,CAACI,MAAL;ADCF,ACAC,AdCH,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AVPA,AFAA,GiBIE,MDEOlB,SAAP;AACD,AbCD,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AGJA,AdJA;AgBOEe,AdEF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AZPe,EiBKbA,OAAO,AjBLe7E,CiBKdiF,IAAR,GAAeL,CjBLF,CAAmB3E,EiBKb,CAACgF,GjBLP,CiBKE,CAAUC,AjBLehF,KiBKzB,CAAgB,EjBLlB,CiBKE,CjBLmCC,CiBKd,CAArB,IAA0B,GAA1B,GAAgCgF,GjBLlC,CiBKsC,CAACC,AjBLe,GiBKpB,EAA/C;ADEF,ACDER,AdEF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AZPE,EiBKAA,IAAI,AjBLAxE,CiBKCiF,EDCErB,OhBNO,CiBKd,CAAgBsB,GDClB,GAAwB,MCDtB,CAA6BT,OAA7B,EAAsCD,IAAI,CAACW,WAA3C,iZjBMkBpF,eAXJ,iPAiBID,QAAQ,CAACG,KAjBb,+pBAAd;AgBOA,ACDD,AdED,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AVNe,AFuCb,MAAIC,GEvCkBuB,SAAT,CAAmB3B,GFuCZ,GAAGA,EEvCV,EAA6B,IFuCX,CAACK,cAAT,CAAwB,eAAxB,CAAvB;AgBjCA,AbCF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AVNE,ADJF,AD2CED,EAAAA,IgBlCI,GdLG,ADJAO,ICIIiB,KFuCK,CAACtB,CEvCV,ADJT,CCIqB,ADJAM,IAArB,EAAwC,CD2CtC,GEvC4BiB,AFuCC3B,OEvCV,EAAkB4B,CFuCrC,KEvCmB,EAA0B;AcM3C,ACDJ,AdEA,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,AJAA,AKAA,AJAA,ACDA,AICA,AVNI,ADLoC,AD4CtC1B,EAAAA,EiBnCEkF,EhBTuBzE,ECKnBkB,EcKE,EfV8B,EeU1BgC,ACDA,AfJA,GeIG,AfJA,CFuCC,CgBlCR,AhBkCSxD,EgBlCf,ACDJ,AfJqByB,GFuCnB,CAAuBxB,OAAvB,GAAiC,EEvClB,CAAqByB,IFuCpC,QEvCe,CAAb,gCDLgC,EAAI;AeWrC,AbCH,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVNIF,ADLF,AD4CA/B,EAAAA,CgBpCA,CAEE,AdLA+B,KDLKjB,CCKC,AFuCA,CgBlCCkD,AdLA9B,AFuCA7B,GgBlCP,CfVW,CeUC,AfVAU,ECKZ,CAAef,IDLV,CAAeW,CD4CtB,CAAwB,CEvCC,CAACwB,ODLnB,CACLnB,MAAM,CCIN,ADJOC,ECIkC,CFuC3C,EAA8CR,CC3C5C,CAAc,cD2ChB,CAA+D,OAA/D,EAAwE,YAAW;AgBjCjF,ACFJ,AdGA,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVP+C2B,ADJ3BxB,AD4ChBR,IC5CgBQ,AD4ChBR,EExC2CgC,EcMvC6B,AfVgB,CgBQfsB,ChBRW3E,KeUL,AdNyC,EAAE,CcMxC,ACFlB,CDEmB,ChBkCC,CiBpCC,AfJwB,AFwCxBL,GgBlCGyD,EhBkCpB,CgBlCuB,AhBkCAxD,CgBlCC0D,KAAV,ChBkCd,CgBlC+BxC,EhBkCE,GgBlCnB,CAAuB,EhBkCrC,6DgBlCc,CAAd;ACDF,AdGF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVRgEW,ADJ9C,AD6Cf,GC7CC,AD2CF,EC3C0BxB,CgBStByE,AfL0DjD,KDJ5D,CADK,CCK8D,ADLrE,ECKuE,CeKvE,EAAgB;ADEd,ACDA,AdGJ,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVT6C,ADF5C,AD4CCrC,EAAAA,GE1CE,GcOIiE,EhBmCE,CAAC5D,IgBnCP,EAAa,QhBmCf,CAAwB,oBAAxB,EAA8CI,gBAA9C,CAA+D,OAA/D,EAAwEC,0BAAxE;AgBlCI,ACDH,AdGH,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVTI4B,AF0CH,IE1CGA,ScOS6B,CdPC,CAACpC,MAAM,CAACQ,CcOC,CAAC0B,OAAO,CAAC,AdPlB,CcOiB,CAAR,AdPW,CcO5B,GdPQ,CAAV;AcQC,AbEL,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AXXO,SAAS/C,eAAT,CAAyBC,KAAzB,EAAgC;AeUpC,ACDDmE,AdGF,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVTI,AaLJ,AdGExE,EgBQAwE,AhBRAxE,EcHIK,IdGE,CcHG,AdGFJ,GgBQG,AFXE,CbKDkB,EeMEK,CFXGW,AdGhB,CAAe7B,QgBQQ,AfNrB,CeMsB,AfNAoB,ADFxB,CAAyBnB,OcHb,CbKV,AaLoB,EbKa,CeMC,AhBRpC,CAAqC,UAASC,GAAT,EAAcC,MAAd,EAAsBC,YAAtB,EAAoC;AgBSvE,AdGJ,AUAA,ATAA,AUAA,ATAA,AIAA,ACAA,ACAA,AJAA,ACDA,AICA,AVTM,AaLJ0B,AdEyE,EcFzEA,MEWMsC,EFXE,CbKC,CaLC,CEWC,EfNE/C,CeMCzC,AfNA,GAAG,CAAb,EAAgByC,CAAC,CeMC,CAACgD,CfNCjD,ADFIrB,KAAK,CAACM,GCED,CAACiB,IDFN,CgBQd,CAA0B,AfNpC,ADHqE,ECG/BD,CAAC,EAAvC,EAA2C,iBeMjC,CAAZ;ADEF,AbEF,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVTQ,AaPgB,AdGmD,CcH7D,CAAd,MdIUxC,CeUD,GAAP,AdPU0C,KAAK,GAAGH,GDJuD,MCI9C,CAACC,CAAD,CAAT,CAAaG,SDHvB3C,CCGF,cDJmE;AeY1E,ACFG,AdIJ,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AGbA2B,OAAO,CAACuB,CESC,EFTT,CAAY,CESCV,AFTA,CESC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,KAAK,CAAC9C,MAA1B,CFTmB1C,CESeyC,CAAC,EAAnC,EAAuC,EFT9B,CAAD,EAAsBtB,KAAK,CAACiC,KAAN,EAAtB,CAAZ,EAAkDC,IAAlD,CAAuD,UAASC,GAAT,EAAc;AEU/D,AdIN,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVVQ,AaJ6D,AdCjE,QAAIhC,EgBSEiD,ChBTC,CAAC3D,CCGC,GeMG,AhBTR,CgBSSuD,AfNAtB,CAAC,GAAG,ADHA,CCGb,EAAgBA,CAAC,EeMf,CAAkB2C,AfNA7C,CaHXW,GADoD,CEUpC,AfNA,CeMCb,AfNAC,ADH9B,CgBS6B,CAAL,AhBTQ,CgBSCqC,GfN7B,CeME,CfNgClC,CAAC,EAAnC,EeMuC0B,AfNA,MeMM,CAACT,YAAP,EAAzC,EAAgE;ADGtE,ACFQW,AdIR,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVVU,AaL2D,AdE/D,McDElB,EEUAkB,CDECN,CDb4D,AdE3D,CAAC7C,GCGGwB,ADHA,CAACpB,GgBSG,AfNA,CcQlB,ACFmB8D,CDECpB,AfXd,CCGezB,CDHC,CeWtB,CCFwB,CDEC,ACFAF,CAAD,AfNE,CeMR,AfNSI,CeMnB,AfNkB,CAAhB;AcSR,ACFK,AdIP,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVVU,ADHF,SeWC,CAAC,IdRIC,CcQCsB,GAAN,AdRS,CAACrB,CcQCsB,OAAX,AdRK,CcQc,IdRI,ADHdtE,CCGR,EACE,GDJJ,EAAkBC,QAAlB,EAA4BC,eAA5B,iCeWC,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,AdIL,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AGfE,AdEK,McFDuD,YAAY,GAAGxD,QAAQ,CAACyD,aAAT,CAAuB,KAAvB,CAAnB;AZgBF,AUAA,ACAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVTU,AaNRD,AdEG,EcFHA,YbMYV,AaNA,CAACY,EAAb,CbMgB,CAACV,CaNC,MbMN,KAAiB,IaN7B,EbMQ,EAA6B;AcQvCsB,ACFIgB,AdIJ,AWAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVTY,AaNV/B,AdEC,EcFDA,CdLA,CgBgBE+B,EFXE,CCaC,ADbA3B,CCaCG,MCFM,GAAG,CFXf,CbMiBjC,AaNA2B,CCanB,CCFI,EDEmBK,GdPG,CAACf,IAAD,AaNxB,CbMU,ScOZ;AACAwB,ACFG,AdIH,AWAA,ATAA,AIAA,ACAA,ACAA,AJAA,AKAA,AVTW,AaLT,AdCD,GgBAwB,EASpB,EDEE,ACXkB,CDWjBH,ACXN,UDWF,GAAqBA,UAArB,GDZkBhD,KAAhB;AEWD,AdID,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA,AVTS,AaLR,CAPD,GASA;AZaA,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA,AVTO,AaHP,AdDO,SAAST,eAAT,GAA2B;AgBUlCgF,AdIA,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA,AVTK,ADJH,MgBSI,CAACpB,EhBTE3D,KgBST,GAAiB4E,GhBTG,CAAC,KgBSrB,chBToB,CAAlB;AEcF,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA,AVTG,ADJF,GCfQ,CAAP;AC6BF,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA,AVTC;ACUD,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA;ATCA,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA;ATCA,AWAA,ATAA,AIAA,ACAA,ACAA,ACAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,ACAA,AEAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AEAA,AIAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA,AGAA;ATCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA,AMAA;ANCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourceRoot":"../src","sourcesContent":["import { closeCurrentTab } from \"./messaging.js\";\n\nexport default function showBlock(window, document, taskDescription) {\n  let blockInner = `\n    <div class=\"ContentWrapper\">\n      <div class=\"DistractionBlock\">\n        <div class=\"container grid-sm\">\n          <div class=\"task-summary columns\">\n            <div class=\"column\">\n              <div class=\"current\">\n                <p>\n                  Here's what you're supposed to be working on:\n                </p>\n                <p class=\"task text-bold text-italic\">\n                  ${taskDescription}\n                </p>\n              </div>\n              <div class=\"new-page\">\n                <p>Here's what this new page is about:</p>\n                <p class=\"page-title text-bold text-italic\">\n                  ${document.title}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div class=\"columns\">\n            <div class=\"column\">\n              <p>Are you on task?</p>\n            </div>\n          </div>\n          <div class=\"options columns\">\n            <div class=\"column\">\n              <button id=\"deepmode-allow-tab\" class=\"allow-tab btn\">\n                Yes, continue\n              </button>\n              <button id=\"deepmode-close-tab\" class=\"close-tab btn btn-success\">\n                No, close this tab\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>`;\n\n  let deepmodeRootElem = document.getElementById(\"deepmode-root\");\n  deepmodeRootElem.innerHTML = blockInner;\n  deepmodeRootElem.style.display = \"block\";\n  document.getElementById(\"deepmode-allow-tab\").addEventListener(\"click\", function() {\n    deepmodeRootElem.style.display = \"none\";\n  });\n  document.getElementById(\"deepmode-close-tab\").addEventListener(\"click\", closeCurrentTab);\n}\n","import showBlock from \"./showBlock.js\";\n\nfunction sendMessage(type, params = {}) {\n  return chrome.runtime.sendMessage(\n    Object.assign({ type }, params)\n  );\n}\n\nexport function onTopicMismatch(store) {\n  chrome.runtime.onMessage.addListener(function(msg, sender, sendResponse) {\n    let { taskDescription } = store.getState();\n    if (msg.type === \"topic_match\") {\n      if (!msg.match) {\n        showBlock(window, document, taskDescription);\n      }\n    }\n  });\n}\n\nexport function closeCurrentTab() {\n  return sendMessage(\"close_current_tab\");\n}\n","/*\n  This returns a promise (resolved w/ the body elem) as soon as the body elem is available on the DOM.\n  Chaining onto this promise allows UI augmentation before the original page has rendered.\n*/\n\nexport default function bodyReady(document) {\n  return new Promise(function(resolve, reject) {\n    let moBody = new MutationObserver(checkForBody);\n    moBody.observe(document.documentElement, { childList: true, subtree: true });\n    setTimeout(moBody.disconnect, 1000);\n\n    function checkForBody(mutations) {\n      for (let i = 0; i < mutations.length; i++) {\n        let nodes = mutations[i].addedNodes;\n        for (let j = 0; j < nodes.length; j++) {\n          let node = nodes[j];\n          if (node.nodeType !== 1)\n            continue;\n\n          if (node.tagName === \"BODY\") {\n            return resolve(node);\n          }\n        }\n      }\n    }\n  });\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = assignIn;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DEFAULT_PORT_NAME = exports.PATCH_STATE_TYPE = exports.STATE_TYPE = exports.DISPATCH_TYPE = void 0;\n// Message type used for dispatch events\n// from the Proxy Stores to background\nvar DISPATCH_TYPE = 'chromex.dispatch'; // Message type for state update events from\n// background to Proxy Stores\n\nexports.DISPATCH_TYPE = DISPATCH_TYPE;\nvar STATE_TYPE = 'chromex.state'; // Message type for state patch events from\n// background to Proxy Stores\n\nexports.STATE_TYPE = STATE_TYPE;\nvar PATCH_STATE_TYPE = 'chromex.patch_state'; // The default name for the port communication via\n// react-chrome-redux\n\nexports.PATCH_STATE_TYPE = PATCH_STATE_TYPE;\nvar DEFAULT_PORT_NAME = \"chromex.port_name\";\nexports.DEFAULT_PORT_NAME = DEFAULT_PORT_NAME;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withSerializer = exports.withDeserializer = exports.noop = void 0;\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar noop = function noop(payload) {\n  return payload;\n};\n\nexports.noop = noop;\n\nvar transformPayload = function transformPayload(message) {\n  var transformer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return _objectSpread({}, message, message.payload ? {\n    payload: transformer(message.payload)\n  } : {});\n};\n\nvar deserializeListener = function deserializeListener(listener) {\n  var deserializer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  var shouldDeserialize = arguments.length > 2 ? arguments[2] : undefined;\n\n  // If a shouldDeserialize function is passed, return a function that uses it\n  // to check if any given message payload should be deserialized\n  if (shouldDeserialize) {\n    return function (message) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (shouldDeserialize.apply(void 0, [message].concat(args))) {\n        return listener.apply(void 0, [transformPayload(message, deserializer)].concat(args));\n      }\n\n      return listener.apply(void 0, [message].concat(args));\n    };\n  } // Otherwise, return a function that tries to deserialize on every message\n\n\n  return function (message) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return listener.apply(void 0, [transformPayload(message, deserializer)].concat(args));\n  };\n};\n/**\n * A function returned from withDeserializer that, when called, wraps addListenerFn with the\n * deserializer passed to withDeserializer.\n * @name AddListenerDeserializer\n * @function\n * @param {Function} addListenerFn The add listener function to wrap.\n * @returns {DeserializedAddListener}\n */\n\n/**\n * A wrapped add listener function that registers the given listener.\n * @name DeserializedAddListener\n * @function\n * @param {Function} listener The listener function to register. It should expect the (optionally)\n * deserialized message as its first argument.\n * @param {Function} [shouldDeserialize] A function that takes the arguments passed to the listener\n * and returns whether the message payload should be deserialized. Not all messages (notably, messages\n * this listener doesn't care about) should be attempted to be deserialized.\n */\n\n/**\n * Given a deserializer, returns an AddListenerDeserializer function that that takes an add listener\n * function and returns a DeserializedAddListener that automatically deserializes message payloads.\n * Each message listener is expected to take the message as its first argument.\n * @param {Function} deserializer A function that deserializes a message payload.\n * @returns {AddListenerDeserializer}\n * Example Usage:\n *   const withJsonDeserializer = withDeserializer(payload => JSON.parse(payload));\n *   const deserializedChromeListener = withJsonDeserializer(chrome.runtime.onMessage.addListener);\n *   const shouldDeserialize = (message) => message.type === 'DESERIALIZE_ME';\n *   deserializedChromeListener(message => console.log(\"Payload:\", message.payload), shouldDeserialize);\n *   chrome.runtime.sendMessage(\"{'type:'DESERIALIZE_ME','payload':{'prop':4}}\");\n *   //Payload: { prop: 4 };\n *   chrome.runtime.sendMessage(\"{'payload':{'prop':4}}\");\n *   //Payload: \"{'prop':4}\";\n */\n\n\nvar withDeserializer = function withDeserializer() {\n  var deserializer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  return function (addListenerFn) {\n    return function (listener, shouldDeserialize) {\n      return addListenerFn(deserializeListener(listener, deserializer, shouldDeserialize));\n    };\n  };\n};\n/**\n * Given a serializer, returns a function that takes a message sending\n * function as its sole argument and returns a wrapped message sender that\n * automaticaly serializes message payloads. The message sender\n * is expected to take the message as its first argument, unless messageArgIndex\n * is nonzero, in which case it is expected in the position specified by messageArgIndex.\n * @param {Function} serializer A function that serializes a message payload\n * Example Usage:\n *   const withJsonSerializer = withSerializer(payload => JSON.stringify(payload))\n *   const serializedChromeSender = withJsonSerializer(chrome.runtime.sendMessage)\n *   chrome.runtime.addListener(message => console.log(\"Payload:\", message.payload))\n *   serializedChromeSender({ payload: { prop: 4 }})\n *   //Payload: \"{'prop':4}\"\n */\n\n\nexports.withDeserializer = withDeserializer;\n\nvar withSerializer = function withSerializer() {\n  var serializer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  return function (sendMessageFn) {\n    var messageArgIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      if (args.length <= messageArgIndex) {\n        throw new Error(\"Message in request could not be serialized. \" + \"Expected message in position \".concat(messageArgIndex, \" but only received \").concat(args.length, \" args.\"));\n      }\n\n      args[messageArgIndex] = transformPayload(args[messageArgIndex], serializer);\n      return sendMessageFn.apply(void 0, args);\n    };\n  };\n};\n\nexports.withSerializer = withSerializer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DIFF_STATUS_KEYS_UPDATED = exports.DIFF_STATUS_REMOVED = exports.DIFF_STATUS_UPDATED = void 0;\n// The `change` value for updated or inserted fields resulting from shallow diff\nvar DIFF_STATUS_UPDATED = 'updated'; // The `change` value for removed fields resulting from shallow diff\n\nexports.DIFF_STATUS_UPDATED = DIFF_STATUS_UPDATED;\nvar DIFF_STATUS_REMOVED = 'removed';\nexports.DIFF_STATUS_REMOVED = DIFF_STATUS_REMOVED;\nvar DIFF_STATUS_KEYS_UPDATED = 'updated_keys';\nexports.DIFF_STATUS_KEYS_UPDATED = DIFF_STATUS_KEYS_UPDATED;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _constants = require(\"../constants\");\n\nfunction _default(obj, difference) {\n  var newObj = Object.assign({}, obj);\n  difference.forEach(function (_ref) {\n    var change = _ref.change,\n        key = _ref.key,\n        value = _ref.value;\n\n    switch (change) {\n      case _constants.DIFF_STATUS_UPDATED:\n        newObj[key] = value;\n        break;\n\n      case _constants.DIFF_STATUS_REMOVED:\n        Reflect.deleteProperty(newObj, key);\n        break;\n\n      default: // do nothing\n\n    }\n  });\n  return newObj;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBrowserAPI = getBrowserAPI;\n\n/**\n * Looks for a global browser api, first checking the chrome namespace and then\n * checking the browser namespace. If no appropriate namespace is present, this\n * function will throw an error.\n */\nfunction getBrowserAPI() {\n  var api = global.chrome || global.browser || browser;\n\n  if (!api) {\n    throw new Error(\"Browser API is not present\");\n  }\n\n  return api;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.assignin\"));\n\nvar _constants = require(\"../constants\");\n\nvar _serialization = require(\"../serialization\");\n\nvar _patch = _interopRequireDefault(require(\"../strategies/shallowDiff/patch\"));\n\nvar _util = require(\"../util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar backgroundErrPrefix = '\\nLooks like there is an error in the background page. ' + 'You might want to inspect your background page for more details.\\n';\nvar defaultOpts = {\n  portName: _constants.DEFAULT_PORT_NAME,\n  state: {},\n  extensionId: null,\n  serializer: _serialization.noop,\n  deserializer: _serialization.noop,\n  patchStrategy: _patch.default\n};\n\nvar Store =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Creates a new Proxy store\n   * @param  {object} options An object of form {portName, state, extensionId, serializer, deserializer, diffStrategy}, where `portName` is a required string and defines the name of the port for state transition changes, `state` is the initial state of this store (default `{}`) `extensionId` is the extension id as defined by browserAPI when extension is loaded (default `''`), `serializer` is a function to serialize outgoing message payloads (default is passthrough), `deserializer` is a function to deserialize incoming message payloads (default is passthrough), and patchStrategy is one of the included patching strategies (default is shallow diff) or a custom patching function.\n   */\n  function Store() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n        _ref$portName = _ref.portName,\n        portName = _ref$portName === void 0 ? defaultOpts.portName : _ref$portName,\n        _ref$state = _ref.state,\n        state = _ref$state === void 0 ? defaultOpts.state : _ref$state,\n        _ref$extensionId = _ref.extensionId,\n        extensionId = _ref$extensionId === void 0 ? defaultOpts.extensionId : _ref$extensionId,\n        _ref$serializer = _ref.serializer,\n        serializer = _ref$serializer === void 0 ? defaultOpts.serializer : _ref$serializer,\n        _ref$deserializer = _ref.deserializer,\n        deserializer = _ref$deserializer === void 0 ? defaultOpts.deserializer : _ref$deserializer,\n        _ref$patchStrategy = _ref.patchStrategy,\n        patchStrategy = _ref$patchStrategy === void 0 ? defaultOpts.patchStrategy : _ref$patchStrategy;\n\n    _classCallCheck(this, Store);\n\n    if (!portName) {\n      throw new Error('portName is required in options');\n    }\n\n    if (typeof serializer !== 'function') {\n      throw new Error('serializer must be a function');\n    }\n\n    if (typeof deserializer !== 'function') {\n      throw new Error('deserializer must be a function');\n    }\n\n    if (typeof patchStrategy !== 'function') {\n      throw new Error('patchStrategy must be one of the included patching strategies or a custom patching function');\n    }\n\n    this.portName = portName;\n    this.readyResolved = false;\n    this.readyPromise = new Promise(function (resolve) {\n      return _this.readyResolve = resolve;\n    });\n    this.browserAPI = (0, _util.getBrowserAPI)();\n    this.extensionId = extensionId; // keep the extensionId as an instance variable\n\n    this.port = this.browserAPI.runtime.connect(this.extensionId, {\n      name: portName\n    });\n    this.safetyHandler = this.safetyHandler.bind(this);\n    this.safetyMessage = this.browserAPI.runtime.onMessage.addListener(this.safetyHandler);\n    this.serializedPortListener = (0, _serialization.withDeserializer)(deserializer)(function () {\n      var _this$port$onMessage;\n\n      return (_this$port$onMessage = _this.port.onMessage).addListener.apply(_this$port$onMessage, arguments);\n    });\n    this.serializedMessageSender = (0, _serialization.withSerializer)(serializer)(function () {\n      var _this$browserAPI$runt;\n\n      return (_this$browserAPI$runt = _this.browserAPI.runtime).sendMessage.apply(_this$browserAPI$runt, arguments);\n    }, 1);\n    this.listeners = [];\n    this.state = state;\n    this.patchStrategy = patchStrategy; // Don't use shouldDeserialize here, since no one else should be using this port\n\n    this.serializedPortListener(function (message) {\n      switch (message.type) {\n        case _constants.STATE_TYPE:\n          _this.replaceState(message.payload);\n\n          if (!_this.readyResolved) {\n            _this.readyResolved = true;\n\n            _this.readyResolve();\n          }\n\n          break;\n\n        case _constants.PATCH_STATE_TYPE:\n          _this.patchState(message.payload);\n\n          break;\n\n        default: // do nothing\n\n      }\n    });\n    this.dispatch = this.dispatch.bind(this); // add this context to dispatch\n  }\n  /**\n  * Returns a promise that resolves when the store is ready. Optionally a callback may be passed in instead.\n  * @param [function] callback An optional callback that may be passed in and will fire when the store is ready.\n  * @return {object} promise A promise that resolves when the store has established a connection with the background page.\n  */\n\n\n  _createClass(Store, [{\n    key: \"ready\",\n    value: function ready() {\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (cb !== null) {\n        return this.readyPromise.then(cb);\n      }\n\n      return this.readyPromise;\n    }\n    /**\n     * Subscribes a listener function for all state changes\n     * @param  {function} listener A listener function to be called when store state changes\n     * @return {function}          An unsubscribe function which can be called to remove the listener from state updates\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this2 = this;\n\n      this.listeners.push(listener);\n      return function () {\n        _this2.listeners = _this2.listeners.filter(function (l) {\n          return l !== listener;\n        });\n      };\n    }\n    /**\n     * Replaces the state for only the keys in the updated state. Notifies all listeners of state change.\n     * @param {object} state the new (partial) redux state\n     */\n\n  }, {\n    key: \"patchState\",\n    value: function patchState(difference) {\n      this.state = this.patchStrategy(this.state, difference);\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n    /**\n     * Replace the current state with a new state. Notifies all listeners of state change.\n     * @param  {object} state The new state for the store\n     */\n\n  }, {\n    key: \"replaceState\",\n    value: function replaceState(state) {\n      this.state = state;\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n    /**\n     * Get the current state of the store\n     * @return {object} the current store state\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\n     * Stub function to stay consistent with Redux Store API. No-op.\n     */\n\n  }, {\n    key: \"replaceReducer\",\n    value: function replaceReducer() {\n      return;\n    }\n    /**\n     * Dispatch an action to the background using messaging passing\n     * @param  {object} data The action data to dispatch\n     * @return {Promise}     Promise that will resolve/reject based on the action response from the background\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(data) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3.serializedMessageSender(_this3.extensionId, {\n          type: _constants.DISPATCH_TYPE,\n          portName: _this3.portName,\n          payload: data\n        }, null, function (resp) {\n          var error = resp.error,\n              value = resp.value;\n\n          if (error) {\n            var bgErr = new Error(\"\".concat(backgroundErrPrefix).concat(error));\n            reject((0, _lodash.default)(bgErr, error));\n          } else {\n            resolve(value && value.payload);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"safetyHandler\",\n    value: function safetyHandler(message) {\n      if (message.action === 'storeReady') {\n        // Remove Saftey Listener\n        this.browserAPI.runtime.onMessage.removeListener(this.safetyHandler); // Resolve if readyPromise has not been resolved.\n\n        if (!this.readyResolved) {\n          this.readyResolved = true;\n          this.readyResolve();\n        }\n      }\n    }\n  }]);\n\n  return Store;\n}();\n\nvar _default = Store;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = applyMiddleware;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n// Function taken from redux source\n// https://github.com/reactjs/redux/blob/master/src/compose.js\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n} // Based on redux implementation of applyMiddleware to support all standard\n// redux middlewares\n\n\nfunction applyMiddleware(store) {\n  for (var _len2 = arguments.length, middlewares = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    middlewares[_key2 - 1] = arguments[_key2];\n  }\n\n  var _dispatch = function dispatch() {\n    throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n  };\n\n  var middlewareAPI = {\n    getState: store.getState.bind(store),\n    dispatch: function dispatch() {\n      return _dispatch.apply(void 0, arguments);\n    }\n  };\n  middlewares = (middlewares || []).map(function (middleware) {\n    return middleware(middlewareAPI);\n  });\n  _dispatch = compose.apply(void 0, _toConsumableArray(middlewares))(store.dispatch);\n  store.dispatch = _dispatch;\n  return store;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = shallowDiff;\n\nvar _constants = require(\"../constants\");\n\n/**\n * Returns a new Object containing only the fields in `new` that differ from `old`\n *\n * @param {Object} old\n * @param {Object} new\n * @return {Array} An array of changes. The changes have a `key`, `value`, and `change`.\n *   The change is either `updated`, which is if the value has changed or been added,\n *   or `removed`.\n */\nfunction shallowDiff(oldObj, newObj) {\n  var difference = [];\n  Object.keys(newObj).forEach(function (key) {\n    if (oldObj[key] !== newObj[key]) {\n      difference.push({\n        key: key,\n        value: newObj[key],\n        change: _constants.DIFF_STATUS_UPDATED\n      });\n    }\n  });\n  Object.keys(oldObj).forEach(function (key) {\n    if (!newObj.hasOwnProperty(key)) {\n      difference.push({\n        key: key,\n        change: _constants.DIFF_STATUS_REMOVED\n      });\n    }\n  });\n  return difference;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require(\"../constants\");\n\nvar _serialization = require(\"../serialization\");\n\nvar _util = require(\"../util\");\n\nvar _diff = _interopRequireDefault(require(\"../strategies/shallowDiff/diff\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Responder for promisified results\n * @param  {object} dispatchResult The result from `store.dispatch()`\n * @param  {function} send         The function used to respond to original message\n * @return {undefined}\n */\nvar promiseResponder = function promiseResponder(dispatchResult, send) {\n  Promise.resolve(dispatchResult).then(function (res) {\n    send({\n      error: null,\n      value: res\n    });\n  }).catch(function (err) {\n    console.error('error dispatching result:', err);\n    send({\n      error: err.message,\n      value: null\n    });\n  });\n};\n\nvar defaultOpts = {\n  portName: _constants.DEFAULT_PORT_NAME,\n  dispatchResponder: promiseResponder,\n  serializer: _serialization.noop,\n  deserializer: _serialization.noop,\n  diffStrategy: _diff.default\n};\n/**\n * Wraps a Redux store so that proxy stores can connect to it.\n * @param {Object} store A Redux store\n * @param {Object} options An object of form {portName, dispatchResponder, serializer, deserializer}, where `portName` is a required string and defines the name of the port for state transition changes, `dispatchResponder` is a function that takes the result of a store dispatch and optionally implements custom logic for responding to the original dispatch message,`serializer` is a function to serialize outgoing message payloads (default is passthrough), `deserializer` is a function to deserialize incoming message payloads (default is passthrough), and diffStrategy is one of the included diffing strategies (default is shallow diff) or a custom diffing function.\n */\n\nvar _default = function _default(store) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOpts,\n      _ref$portName = _ref.portName,\n      portName = _ref$portName === void 0 ? defaultOpts.portName : _ref$portName,\n      _ref$dispatchResponde = _ref.dispatchResponder,\n      dispatchResponder = _ref$dispatchResponde === void 0 ? defaultOpts.dispatchResponder : _ref$dispatchResponde,\n      _ref$serializer = _ref.serializer,\n      serializer = _ref$serializer === void 0 ? defaultOpts.serializer : _ref$serializer,\n      _ref$deserializer = _ref.deserializer,\n      deserializer = _ref$deserializer === void 0 ? defaultOpts.deserializer : _ref$deserializer,\n      _ref$diffStrategy = _ref.diffStrategy,\n      diffStrategy = _ref$diffStrategy === void 0 ? defaultOpts.diffStrategy : _ref$diffStrategy;\n\n  if (!portName) {\n    throw new Error('portName is required in options');\n  }\n\n  if (typeof serializer !== 'function') {\n    throw new Error('serializer must be a function');\n  }\n\n  if (typeof deserializer !== 'function') {\n    throw new Error('deserializer must be a function');\n  }\n\n  if (typeof diffStrategy !== 'function') {\n    throw new Error('diffStrategy must be one of the included diffing strategies or a custom diff function');\n  }\n\n  var browserAPI = (0, _util.getBrowserAPI)();\n  /**\n   * Respond to dispatches from UI components\n   */\n\n  var dispatchResponse = function dispatchResponse(request, sender, sendResponse) {\n    if (request.type === _constants.DISPATCH_TYPE && request.portName === portName) {\n      var action = Object.assign({}, request.payload, {\n        _sender: sender\n      });\n      var dispatchResult = null;\n\n      try {\n        dispatchResult = store.dispatch(action);\n      } catch (e) {\n        dispatchResult = Promise.reject(e.message);\n        console.error(e);\n      }\n\n      dispatchResponder(dispatchResult, sendResponse);\n      return true;\n    }\n  };\n  /**\n  * Setup for state updates\n  */\n\n\n  var connectState = function connectState(port) {\n    if (port.name !== portName) {\n      return;\n    }\n\n    var serializedMessagePoster = (0, _serialization.withSerializer)(serializer)(function () {\n      return port.postMessage.apply(port, arguments);\n    });\n    var prevState = store.getState();\n\n    var patchState = function patchState() {\n      var state = store.getState();\n      var diff = diffStrategy(prevState, state);\n\n      if (diff.length) {\n        prevState = state;\n        serializedMessagePoster({\n          type: _constants.PATCH_STATE_TYPE,\n          payload: diff\n        });\n      }\n    }; // Send patched state down connected port on every redux store state change\n\n\n    var unsubscribe = store.subscribe(patchState); // when the port disconnects, unsubscribe the sendState listener\n\n    port.onDisconnect.addListener(unsubscribe); // Send store's initial state through port\n\n    serializedMessagePoster({\n      type: _constants.STATE_TYPE,\n      payload: prevState\n    });\n  };\n\n  var withPayloadDeserializer = (0, _serialization.withDeserializer)(deserializer);\n\n  var shouldDeserialize = function shouldDeserialize(request) {\n    return request.type === _constants.DISPATCH_TYPE && request.portName === portName;\n  };\n  /**\n   * Setup action handler\n   */\n\n\n  withPayloadDeserializer(function () {\n    var _browserAPI$runtime$o;\n\n    return (_browserAPI$runtime$o = browserAPI.runtime.onMessage).addListener.apply(_browserAPI$runtime$o, arguments);\n  })(dispatchResponse, shouldDeserialize);\n  /**\n   * Setup external action handler\n   */\n\n  if (browserAPI.runtime.onMessageExternal) {\n    withPayloadDeserializer(function () {\n      var _browserAPI$runtime$o2;\n\n      return (_browserAPI$runtime$o2 = browserAPI.runtime.onMessageExternal).addListener.apply(_browserAPI$runtime$o2, arguments);\n    })(dispatchResponse, shouldDeserialize);\n  } else {\n    console.warn('runtime.onMessageExternal is not supported');\n  }\n  /**\n   * Setup extended connection\n   */\n\n\n  browserAPI.runtime.onConnect.addListener(connectState);\n  /**\n   * Setup extended external connection\n   */\n\n  if (browserAPI.runtime.onConnectExternal) {\n    browserAPI.runtime.onConnectExternal.addListener(connectState);\n  } else {\n    console.warn('runtime.onConnectExternal is not supported');\n  }\n  /**\n   * Safety message to tabs for content scripts\n   */\n\n\n  browserAPI.tabs.query({}, function (tabs) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = tabs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var tab = _step.value;\n        browserAPI.tabs.sendMessage(tab.id, {\n          action: 'storeReady'\n        });\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }); // For non-tab based\n  // TODO: Find use case for this. Ommiting until then.\n  // browserAPI.runtime.sendMessage(null, {action: 'storeReady'});\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\n * Simple middleware intercepts actions and replaces with\n * another by calling an alias function with the original action\n * @type {object} aliases an object that maps action types (keys) to alias functions (values) (e.g. { SOME_ACTION: newActionAliasFunc })\n */\nvar _default = function _default(aliases) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        var alias = aliases[action.type];\n\n        if (alias) {\n          return next(alias(action));\n        }\n\n        return next(action);\n      };\n    };\n  };\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Store\", {\n  enumerable: true,\n  get: function get() {\n    return _Store.default;\n  }\n});\nObject.defineProperty(exports, \"applyMiddleware\", {\n  enumerable: true,\n  get: function get() {\n    return _applyMiddleware.default;\n  }\n});\nObject.defineProperty(exports, \"wrapStore\", {\n  enumerable: true,\n  get: function get() {\n    return _wrapStore.default;\n  }\n});\nObject.defineProperty(exports, \"alias\", {\n  enumerable: true,\n  get: function get() {\n    return _alias.default;\n  }\n});\n\nvar _Store = _interopRequireDefault(require(\"./store/Store\"));\n\nvar _applyMiddleware = _interopRequireDefault(require(\"./store/applyMiddleware\"));\n\nvar _wrapStore = _interopRequireDefault(require(\"./wrap-store/wrapStore\"));\n\nvar _alias = _interopRequireDefault(require(\"./alias/alias\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","import \"../styles/content_scripts.scss\";\n// import { updateUI } from \"./siteSpecifics.js\";\nimport { onTopicMismatch } from \"./messaging.js\";\nimport bodyReady from \"./bodyReady.js\";\nimport { Store } from \"webext-redux\";\n\nconst store = new Store({\n  portName: \"deepmode_bg_bridge\"\n});\n\nPromise.all([bodyReady(document), store.ready()]).then(function(arr) {\n  let [ body ] = arr;\n  let deepmodeRoot = document.createElement(\"div\");\n  deepmodeRoot.id = \"deepmode-root\";\n  body.appendChild(deepmodeRoot);\n\n  onTopicMismatch(store);\n});\n\n// Update UI of certain distracting sites\n// updateUI(window.location.href);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}